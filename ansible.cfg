[defaults]
# --- Paths (repo-first for reproducibility) ---
inventory = ansible/inventories
roles_path = ansible/roles
collections_path = ansible/collections:~/.ansible/collections:/usr/share/ansible/collections

# --- Logging (user-writable; stays with the repo) ---
log_path = ~/.ansible/ansible.log
retry_files_enabled = False          # avoid cluttering repo with *.retry files

# --- Python interpreter auto-detection (good with mixed hosts) ---
interpreter_python = auto

callback_plugins = ./ansible/callback_plugins

# --- Output & UX ---
# readable task output
stdout_callback = yaml
# show callback output (e.g., timer)
bin_ansible_callbacks = True
# timing per task & where time goes
callbacks_enabled = timer, profile_tasks, vars_trace
display_args_to_stdout = True

# --- Performance & stability ---
# bump if you run large inventories
forks = 20
# SSH command timeout (seconds)
timeout = 30

# --- Security / convenience ---
# NOTE: set back to True in CI/CD or prod if you want strict SSH hygiene
host_key_checking = False

# Optional: keep deprecations visible while you evolve the repo
deprecation_warnings = True

[ssh_connection]
# Faster SSH; fewer round trips. Requires 'requiretty' disabled on remote sudoers (default on most distros).
pipelining = True
# Solid defaults for multiplexing and avoiding slow auth fallbacks
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o PreferredAuthentications=publickey -o KbdInteractiveAuthentication=no
control_path = %(directory)s/%%h-%%p-%%r

[inventory]
# Let Ansible auto-detect YAML/INI and support dynamic inventory scripts
enable_plugins = host_list, script, yaml, ini, auto

[galaxy]
# Explicit server list (useful if you later add a private Galaxy/Automation Hub)
server_list = release_galaxy

[galaxy_server.release_galaxy]
url = https://galaxy.ansible.com/
